{"ast":null,"code":"import _asyncToGenerator from \"/Applications/admin_gooway/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { catchError } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../auth-api/auth-api.service\";\nexport class PlaceService {\n  constructor(http, _authService) {\n    this.http = http;\n    this._authService = _authService;\n    this.urlApi = environment.url_api;\n    this.local = this._authService.getInfoLocal();\n  }\n\n  handleError(err) {\n    let errorMessage;\n\n    if (err.error instanceof ErrorEvent) {\n      errorMessage = `An error occurred: ${err.error.message}`;\n    } else {\n      errorMessage = `Server returned code: ${err.status}, error message is: ${err.message}`;\n    }\n\n    throw new Error(errorMessage);\n  }\n\n  addPlace(Place) {\n    var _this = this;\n\n    //Place.companyId = this.local.companyId;\n    Place.append('companyId', this.local.companyId);\n    const URI = this.urlApi + 'places/create';\n    return this.http.post(URI, Place).pipe(catchError( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (err) {\n        if (err.status == 401) {\n          _this._authService.logout();\n        }\n\n        _this.handleError(err);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()));\n  }\n\n  updatePlace(id, Place) {\n    var _this2 = this;\n\n    const URI = this.urlApi + `places/update/${id}`;\n    return this.http.put(URI, Place).pipe(catchError( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (err) {\n        if (err.status == 401) {\n          _this2._authService.logout();\n        }\n\n        _this2.handleError(err);\n      });\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()));\n  }\n\n  deletePlace(id) {\n    var _this3 = this;\n\n    const URI = this.urlApi + `places/delete/${id}`;\n    return this.http.delete(URI).pipe(catchError( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(function* (err) {\n        if (err.status == 401) {\n          _this3._authService.logout();\n        }\n\n        _this3.handleError(err);\n      });\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }()));\n  }\n\n  getPlaceById(id) {\n    var _this4 = this;\n\n    let companyId = this.local.companyId;\n    const URI = this.urlApi + `places/findById/${id}`;\n    let data = {\n      \"companyId\": companyId\n    };\n    return this.http.post(URI, data).pipe(catchError( /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(function* (err) {\n        if (err.status == 401) {\n          _this4._authService.logout();\n        }\n\n        _this4.handleError(err);\n      });\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }()));\n  }\n\n  getPlacesByCompany() {\n    var _this5 = this;\n\n    const URI = this.urlApi + `places/listar`;\n    let companyId = this.local.companyId;\n    let data = {\n      \"companyId\": companyId\n    };\n    return this.http.post(URI, data).pipe(catchError( /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(function* (err) {\n        if (err.status == 401) {\n          _this5._authService.logout();\n        }\n\n        _this5.handleError(err);\n      });\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }()));\n  }\n\n}\n\nPlaceService.ɵfac = function PlaceService_Factory(t) {\n  return new (t || PlaceService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthApiService));\n};\n\nPlaceService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PlaceService,\n  factory: PlaceService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["/Applications/admin_gooway/src/app/infrastructure/services/place/place-api.service.ts"],"names":["catchError","environment","i0","i1","i2","PlaceService","constructor","http","_authService","urlApi","url_api","local","getInfoLocal","handleError","err","errorMessage","error","ErrorEvent","message","status","Error","addPlace","Place","append","companyId","URI","post","pipe","logout","updatePlace","id","put","deletePlace","delete","getPlaceById","data","getPlacesByCompany","ɵfac","PlaceService_Factory","t","ɵɵinject","HttpClient","AuthApiService","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { catchError } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../auth-api/auth-api.service\";\nexport class PlaceService {\n    constructor(http, _authService) {\n        this.http = http;\n        this._authService = _authService;\n        this.urlApi = environment.url_api;\n        this.local = this._authService.getInfoLocal();\n    }\n    handleError(err) {\n        let errorMessage;\n        if (err.error instanceof ErrorEvent) {\n            errorMessage = `An error occurred: ${err.error.message}`;\n        }\n        else {\n            errorMessage = `Server returned code: ${err.status}, error message is: ${err.message}`;\n        }\n        throw new Error(errorMessage);\n    }\n    addPlace(Place) {\n        //Place.companyId = this.local.companyId;\n        Place.append('companyId', this.local.companyId);\n        const URI = this.urlApi + 'places/create';\n        return this.http.post(URI, Place).\n            pipe(catchError(async (err) => {\n            if (err.status == 401) {\n                this._authService.logout();\n            }\n            this.handleError(err);\n        }));\n    }\n    updatePlace(id, Place) {\n        const URI = this.urlApi + `places/update/${id}`;\n        return this.http.put(URI, Place).\n            pipe(catchError(async (err) => {\n            if (err.status == 401) {\n                this._authService.logout();\n            }\n            this.handleError(err);\n        }));\n    }\n    deletePlace(id) {\n        const URI = this.urlApi + `places/delete/${id}`;\n        return this.http.delete(URI).pipe(catchError(async (err) => {\n            if (err.status == 401) {\n                this._authService.logout();\n            }\n            this.handleError(err);\n        }));\n    }\n    getPlaceById(id) {\n        let companyId = this.local.companyId;\n        const URI = this.urlApi + `places/findById/${id}`;\n        let data = {\n            \"companyId\": companyId\n        };\n        return this.http.post(URI, data).\n            pipe(catchError(async (err) => {\n            if (err.status == 401) {\n                this._authService.logout();\n            }\n            this.handleError(err);\n        }));\n    }\n    getPlacesByCompany() {\n        const URI = this.urlApi + `places/listar`;\n        let companyId = this.local.companyId;\n        let data = {\n            \"companyId\": companyId\n        };\n        return this.http.post(URI, data).\n            pipe(catchError(async (err) => {\n            if (err.status == 401) {\n                this._authService.logout();\n            }\n            this.handleError(err);\n        }));\n    }\n}\nPlaceService.ɵfac = function PlaceService_Factory(t) { return new (t || PlaceService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthApiService)); };\nPlaceService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: PlaceService, factory: PlaceService.ɵfac, providedIn: 'root' });\n"]},"metadata":{},"sourceType":"module"}